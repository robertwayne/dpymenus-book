<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Text-Based Menus - Discord Menus</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        
        <link rel="stylesheet" href="css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="intro.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">Getting Started</li><li class="chapter-item expanded "><a href="installation.html"><strong aria-hidden="true">1.</strong> Installation</a></li><li class="chapter-item expanded "><a href="running_examples.html"><strong aria-hidden="true">2.</strong> Running Examples</a></li><li class="chapter-item expanded affix "><li class="part-title">Building Menus</li><li class="chapter-item expanded "><a href="text_menus.html" class="active"><strong aria-hidden="true">3.</strong> Text-Based Menus</a></li><li class="chapter-item expanded "><a href="button_menus.html"><strong aria-hidden="true">4.</strong> Button-Based Menus</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="paginated_menus.html"><strong aria-hidden="true">4.1.</strong> Using a PaginatedMenu</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="overriding_defaults.html"><strong aria-hidden="true">4.1.1.</strong> Overriding Default Buttons</a></li></ol></li><li class="chapter-item expanded "><a href="polls.html"><strong aria-hidden="true">4.2.</strong> Using a Poll</a></li></ol></li><li class="chapter-item expanded "><a href="local_configuration.html"><strong aria-hidden="true">5.</strong> Configuring Your Menu</a></li><li class="chapter-item expanded "><a href="templates.html"><strong aria-hidden="true">6.</strong> Templates</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="field_overrides.html"><strong aria-hidden="true">6.1.</strong> Field Overrides</a></li></ol></li><li class="chapter-item expanded "><a href="pages.html"><strong aria-hidden="true">7.</strong> Creating Pages</a></li><li class="chapter-item expanded affix "><li class="part-title">Configuration</li><li class="chapter-item expanded "><a href="global_configuration.html"><strong aria-hidden="true">8.</strong> Using pyproject.toml</a></li><li class="chapter-item expanded "><a href="constants.html"><strong aria-hidden="true">9.</strong> Constant Variables</a></li><li class="chapter-item expanded affix "><li class="part-title">Advanced Features</li><li class="chapter-item expanded "><a href="dynamic_data.html"><strong aria-hidden="true">10.</strong> Passing Dynamic Data</a></li><li class="chapter-item expanded "><a href="sessions.html"><strong aria-hidden="true">11.</strong> Sessions</a></li><li class="chapter-item expanded "><a href="lifecycle.html"><strong aria-hidden="true">12.</strong> Lifecycle</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="hooks.html"><strong aria-hidden="true">12.1.</strong> Hooks</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="contributing.html">Contributing</a></li><li class="chapter-item expanded affix "><a href="projects.html">Other Projects</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Discord Menus</h1>

                    <div class="right-buttons">
                        
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                        <a href="https://github.com/robertwayne/dpymenus" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                        

                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="text-based-menus"><a class="header" href="#text-based-menus">Text-Based Menus</a></h1>
<p>Text-based menus are useful when you need a way to parse user text, or just as a means to limit your requests against
the Discord API <em>(button-based menus have inherent overhead because of this)</em>.</p>
<p>Let's look at the official <code>text_menu_example.py</code>.</p>
<h2 id="imports"><a class="header" href="#imports">Imports</a></h2>
<pre><code class="language-python">from dpymenus import Page, TextMenu
from dpymenus.constants import CONFIRM
</code></pre>
<p>We always want to import the <code>Page</code> class, as it is an enhanced form of the <code>Embed</code>. In addition, we will import the
type of menu we are creating. We will also make use of some constants provided by the library to make validating input
easier. You'll read more on that later.</p>
<h2 id="cog-core"><a class="header" href="#cog-core">Cog Core</a></h2>
<pre><code class="language-python">class MyTextMenu(commands.Cog):
    def __init__(self, client):
        self.client = client


def setup(client):
    client.add_cog(MyTextMenu(client))
</code></pre>
<p>The 'core' of a cog, or a <code>discord.py</code> command file, generally looks like this. We inherit from the <code>commands.Cog</code>
class, and we always supply a <code>setup</code> function, which adds the cog to your bot instance. Inside the core, we will be
able to add our command and relevant menu code.</p>
<h2 id="command"><a class="header" href="#command">Command</a></h2>
<pre><code class="language-python">@commands.command()
async def text(self, ctx):
    page1 = Page(title='Ping Menu', description='Are you absolutely sure you want to send a ping command?', )
    page1.set_footer(text='Type `yes` if you are sure.\nType `quit` to cancel this menu.')
    page1.on_next(self.confirm)

    page2 = Page(title='Ping Menu', description='Pong!')

    menu = TextMenu(ctx)
    menu.add_pages([page1, page2])
    menu.normalize_responses()
    await menu.open()
</code></pre>
<p>The first lines, the decorator and definition, define our command. Next, we set up several pages. A Page inherits from
Embed, so you have access to all the regular methods and attributes on Embeds here. We do have additional methods
though, which you would notice as <code>on_next</code> in this example.</p>
<p><code>on_next</code> is a method which takes a callable <em>(function or method)</em> reference and sets it up internally as a page
callback. We will look at the specific callback, <code>self.confirm</code>, in a moment.</p>
<p>You'll notice <code>page2</code> does not have an <code>on_next</code>. This signifies the end of a menu, or the last page.</p>
<h2 id="menu-breakdown"><a class="header" href="#menu-breakdown">Menu Breakdown</a></h2>
<pre><code class="language-python">menu = TextMenu(ctx)
</code></pre>
<p>This is how a menu is initialized. It always takes your command context as an argument, and optionally can take a
template. You will read about templates in a later chapter.</p>
<hr />
<pre><code class="language-python">menu.add_pages([page1, page2])
</code></pre>
<p>This is how pages are added to a menu instance. It takes a list of Page or Embed objects. In this case, we assigned our
pages to variables <em>(page1 and page2)</em> and put those variables in the list argument.</p>
<hr />
<pre><code class="language-python">menu.normalize_responses()
</code></pre>
<p>This is a special method for text-based menus that will normalize user input. It strips unnessecary whitespace and
converts it to lowercase. This makes it easier to process the input for you.</p>
<hr />
<pre><code class="language-python">await menu.open()
</code></pre>
<p>This method should be the final thing you call on your menu. It will start the menu up, which means running through the
pre-validation steps, creating a user-menu session, and starting the main menu loop. At this point, your menu will be
intractable in Discord.</p>
<h2 id="callback-breakdown"><a class="header" href="#callback-breakdown">Callback Breakdown</a></h2>
<pre><code class="language-python">@staticmethod
async def confirm(menu):
    if menu.response_in(CONFIRM):
        await menu.next()
</code></pre>
<p>This is a normal static method. Note that a menu callback must <strong>always</strong> be async. It takes a menu instance as the
argument, so you can access various menu methods and data.</p>
<p>In this example, we will use a special method on the text-based menu class called <code>response_in</code>, which checks if the
user input is in the supplied list of data. <code>CONFIRM</code> is a list containing values like 'y' and 'yes', so if the user
types a 'y' in chat, this will return true and proceed to the next line.</p>
<p><code>next</code> is a method available on all menu types which simply proceeds to the next available page.</p>
<p>When the menu updates, it will always check if the current page has a callback. Because our second page did not define
one, an internal method will run that closes our menu and ends the user-menu session.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="running_examples.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="button_menus.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="running_examples.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="button_menus.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
